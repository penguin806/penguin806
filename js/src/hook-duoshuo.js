typeof DUOSHUO!=="undefined"?hookTemplate():$("#duoshuo-script")[0].onload=hookTemplate;function hookTemplate(){var a=DUOSHUO.templates.post;DUOSHUO.templates.post=function(e,o){var i=a(e,o);var r=e.post.agent;var s=e.post.author.user_id;var t="";if(s&&s==CONFIG.duoshuo.userId){t='<span class="this_ua admin">'+CONFIG.duoshuo.author+"</span>"}if(r&&/^Mozilla/.test(r)){i=i.replace(/<\/div><p>/,t+getAgentInfo(r)+"</div><p>")}return i}}function getAgentInfo(a){$.ua.set(a);var e=$.ua;var o=c()?"<br><br>":'<span class="duoshuo-ua-separator"></span>';var i=e.os.name;var r=e.os.version;var s=e.browser.name;var t=e.browser.version;var n="desktop";var l="globe";if(i.match(/Android/i))n="android";else if(i.match(/linux/i))n="linux";else if(i.match(/mac os|ios/i))n="apple";if(r=="x86_64")r="x64";if(s.match(/chrome|chromium/i))l="chrome";else if(s.match(/firefox/i))l="firefox";else if(s.match(/opera/i))l="opera";else if(s.match(/safari/i))l="safari";else if(s.match(/ie/i))l="internet-explorer";else if(s.match(/WeChat/i))l="wechat";else if(s.match(/QQBrowser/i))l="qq";return o+'<span class="this_ua platform '+i+'">'+'<i class="fa fa-'+n+'"></i>'+" "+i+" "+r+"</span>"+o+'<span class="this_ua browser '+s+'">'+'<i class="fa fa-'+l+'"></i>'+" "+s+"|"+t+"</span>";function p(){var a=s.toLowerCase();if(a.match(/WeChat/i)){return"wechat"}if(a.match(/QQBrowser/i)){return"qq"}return a}function c(){var a=window.navigator.userAgent;var e=a.match(/iPad/i)!==null;var o=["iphone","android","phone","mobile","wap","netfront","x11","java","opera mobi","opera mini","ucweb","windows ce","symbian","symbianos","series","webos","sony","blackberry","dopod","nokia","samsung","palmsource","xda","pieplus","meizu","midp","cldc","motorola","foma","docomo","up.browser","up.link","blazer","helio","hosin","huawei","novarra","coolpad","webos","techfaith","palmsource","alcatel","amoi","ktouch","nexian","ericsson","philips","sagem","wellcom","bunjalloo","maui","smartphone","iemobile","spice","bird","zte-","longcos","pantech","gionee","portalmmm","jig browser","hiptop","benq","haier","^lct","320x320","240x320","176x220"];var i=new RegExp(o.join("|"),"i");return!e&&a.match(i)}}